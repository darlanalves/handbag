!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.handbag=t()}(this,function(){"use strict";var e={};e["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},e.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var t=Object.prototype.toString,n={},r="This injector is frozen and cannot be modified",o={array:function(e){return"[object Array]"===t.call(e)},"function":function(e){return"function"==typeof e},object:function(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":e["typeof"](t))}},i=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,a=function(){function t(){e.classCallCheck(this,t),this._reset()}return e.createClass(t,[{key:"get",value:function(e,t){if(o.array(e))return e.map(function(e){return this.get(e,t)},this);if("handbag"===e)return this;if(t&&t.hasOwnProperty(e))return t[e];var r=this.$cache;if(r.hasOwnProperty(e)&&r[e]!==n)return r[e];var i=this._getOrCreate(e,t);return!0===this.$privates[e]&&delete r[e],i}},{key:"_getOrCreate",value:function(e,t){var r=this.$cache,o=this.$stack,i=this.$providers,a=void 0;o.push(e);try{if(!i.hasOwnProperty(e))throw new Error("Dependency not found: "+o.join(" <- "));if(r[e]===n)throw new Error("Circular dependency found: "+o.join(" <- "));r[e]=n,r[e]=this.instantiate(i[e],t)}catch(u){r[e]===n&&delete r[e],a=u}finally{o.pop()}if(a)throw a;return r[e]}},{key:"has",value:function(e){return this.$cache.hasOwnProperty(e)||this.$providers.hasOwnProperty(e)}},{key:"provideShared",value:function(e,t){return this.provide(e,t,!0)}},{key:"provideNotShared",value:function(e,t){return this.provide(e,t,!1)}},{key:"provide",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(this.$frozen)throw new Error(r);if(o.array(t)){var i=t[t.length-1];if(!o["function"](i))throw new Error("Invalid provider for "+e);return this._register(e,t,n),this}if(o["function"](t)){var a=this._parseDependencies(t);return a.push(t),this._register(e,a,n),this}return this.constant(e,t),this}},{key:"constant",value:function(e,t){if(this.$frozen)throw new Error(r);return this.$cache[e]=t,this}},{key:"instantiate",value:function(e,t){var n,r,i=function(){};return i.prototype=(o.array(e)?e[e.length-1]:e).prototype,n=new i,r=this.invoke(e,n,t),n=o.object(r)||o["function"](r)?r:n}},{key:"invoke",value:function(e,t,n){var r=void 0;if(o.array(e)?r=this._getInvokableFromArray(e):o["function"](e)&&(r=this._getInvokableFromFunction(e)),!r||!r.method)throw new Error("Invalid invokable value");var i=r,a=i.dependencies;return a.length&&(a=this.get(a,n)),r.method.apply(t||null,a)}},{key:"_getInvokableFromArray",value:function(e){var t=e.slice(0),n=t.pop();return o["function"](n)||(n=null),{dependencies:t,method:n}}},{key:"_getInvokableFromFunction",value:function(e){var t=e.$inject||this._parseDependencies(e);return{dependencies:t,method:e}}},{key:"_annotateConstructor",value:function(){var e=Array.from(arguments),t=e.pop();return t.$inject=e,t}},{key:"_parseDependencies",value:function(e){var t=e.toString().match(i),n=t&&t[1];return n&&n.split(",").map(function(e){return e.trim()})||[]}},{key:"_register",value:function(e,t,n){if(this.$providers.hasOwnProperty(e))throw new Error("Cannot register a dependency that already exists: "+e);this.$providers[e]=this._annotateConstructor.apply(null,t),n||(this.$privates[e]=!0)}},{key:"freeze",value:function(){this.$frozen=!0}},{key:"_reset",value:function(){this.$cache={},this.$providers={},this.$privates={},this.$stack=[]}}],[{key:"create",value:function(){return new t}}]),t}();return a});
//# sourceMappingURL=handbag.min.js.map